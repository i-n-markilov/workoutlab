{% extends 'shared/base.html' %}
{% load static %}
{% load tailwind_filters %}

{% block title %}
    Edit Workout Plan
{% endblock %}

{% block content %}
    <h1 class='text-3xl font-bold text-gray-900 mb-10'>Edit Workout Plan</h1>

    <div class='bg-white p-6 rounded-lg shadow-md'>
        <form method='post'>
            {% csrf_token %}
            {% for field in workout_form %}
                <div class='mb-4'>
                    {{ field|as_crispy_field }}
                </div>
            {% endfor %}
            {{ formset.management_form}}
            <table class="min-w-full border border-gray-200 rounded-lg">
              <thead class="bg-gray-100">
                <tr>
                  <th>Exercise</th>
                  <th>Order</th>
                  <th>Sets</th>
                  <th>Reps</th>
                  <th>Duration (s)</th>
                  <th>Rest (s)</th>
                  <th>Delete</th>
                </tr>
              </thead>
              <tbody>
                {% for form in formset %}
                    {{ form.errors }}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}
                  <tr class="border-b">
                    <td>{{ form.exercise|as_crispy_field }}</td>
                    <td>{{ form.order|as_crispy_field }}</td>
                    <td>{{ form.sets|as_crispy_field }}</td>
                    <td>{{ form.reps|as_crispy_field }}</td>
                    <td>{{ form.duration_seconds|as_crispy_field }}</td>
                    <td>{{ form.rest_seconds|as_crispy_field }}</td>
                    <td>{{ form.DELETE }}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
            <div class='mt-6 flex justify-end'>
                <button type='submit' class='bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg shadow transition duration-300 ease-in-out'>
                    Save Changes
                </button>
                <a href='{% url 'workout:details' workout_plan.pk workout_plan.slug %}' class='ml-4 text-gray-600 hover:text-gray-800 py-2 px-4 rounded-lg'>
                    Cancel
                </a>
            </div>
        </form>
    </div>
{% endblock content %}